from Wappalyzer import Wappalyzer, WebPage
import requests

def detect_technologies(target):
    try:
        wappalyzer = Wappalyzer.latest()
        webpage = WebPage.new_from_url("http://" + target)
        technologies = wappalyzer.analyze(webpage)
        # Transforme la liste en une chaîne (séparée par des virgules ou des <br>)
        return {"result": "<br>".join(sorted(technologies))}
    except Exception as e:
        return {"error": str(e)}
